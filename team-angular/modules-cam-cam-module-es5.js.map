{"version":3,"sources":["src/app/modules/cam/cam.component.html","src/app/modules/cam/cam-routing.module.ts","src/app/modules/cam/cam.component.css","src/app/modules/cam/cam.component.ts","src/app/modules/cam/cam.module.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,gWAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,UAAM,MAAM,GAAW,CACnB;AACI,MAAA,IAAI,EAAE,EADV;AAEI,MAAA,SAAS,EAAE,2CAAA,CAAA,cAAA;AAFf,KADmB,CAAvB;AAYA,QAAa,gBAAgB,GAA7B,MAAa,gBAAb,CAA6B;AACzB,MAAA,WAAA,GAAA;AACI,QAAA,OAAO,CAAC,GAAR,CAAY,+BAAZ;AACH;;AAHwB,KAA7B;AAAa,IAAA,gBAAgB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAL5B,MAAA,CAAA,0CAAA,CAAA,UAAA,CAAA,CAAA,CAAS;AACN,MAAA,OAAO,EAAE,CAAC,4CAAA,CAAA,cAAA,CAAA,CAAa,QAAb,CAAsB,MAAtB,CAAD,CADH;AAEN,MAAA,OAAO,EAAE,CAAC,4CAAA,CAAA,cAAA,CAAD,CAFH;AAGN,MAAA,SAAS,EAAE;AAHL,KAAT,CAK4B,E,yEAAA,CAAA,EAAhB,gBAAgB,CAAhB;;;;;;;;;;;;;;;;ACjBb,IAAA,mBAAA,CAAA,CAAA,CAAA,mBAAA;AAAe;;;AAAA,IAAA,mBAAA,CAAA,SAAA,CAAA,GAAA,gyEAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACOf,QAAa,YAAY,GAAzB,MAAa,YAAb,CAAyB;AAOvB,MAAA,WAAA,GAAA;AACE,QAAA,OAAO,CAAC,GAAR,CAAY,2BAAZ;AACD;;AAED,MAAA,QAAQ,GAAA;AACN,aAAK,OAAL,GAAe,QAAQ,CAAC,aAAT,CAAuB,YAAvB,CAAf;AACA,aAAK,SAAL,GAAiB,QAAQ,CAAC,aAAT,CAAuB,cAAvB,CAAjB;AACA,aAAK,SAAL,GAAiB,QAAQ,CAAC,aAAT,CAAuB,cAAvB,CAAjB;AACA,aAAK,UAAL,GAAkB,QAAQ,CAAC,aAAT,CAAuB,eAAvB,CAAlB;AAEA,aAAK,QAAL;AACD;;AAED,MAAA,WAAW,GAAA;AACT,aAAK,OAAL;AACD;;AAED,MAAA,QAAQ,GAAA;AACN,YAAI,QAAJ;AAEA,QAAA,SAAS,CAAC,YAAV,CAAuB,gBAAvB,GAA0C,IAA1C,CAAgD,OAAD,IAA+B;AAC5E,UAAA,OAAO,GAAG,OAAO,CAAC,MAAR,CAAe,CAAC,IAAI,CAAC,CAAC,IAAF,KAAW,YAA/B,CAAV;AACA,UAAA,OAAO,CAAC,GAAR,CAAY,OAAZ;AACA,UAAA,QAAQ,GAAG,OAAO,CAAC,CAAD,CAAP,CAAW,QAAtB;AACD,SAJD,EAHM,CASN;;AACA,cAAM,aAAa,GAAG;AAAE,UAAA,KAAK,EAAE;AAAE,YAAA,KAAK,EAAE;AAAE,cAAA,GAAG,EAAE;AAAP,aAAT;AAAwB,YAAA,MAAM,EAAE;AAAE,cAAA,GAAG,EAAE;AAAP;AAAhC;AAAT,SAAtB;AAEA,QAAA,SAAS,CAAC,YAAV,CACG,YADH,CACgB,aADhB,EAEG,IAFH,CAES,MAAD,IAAwB;AAC5B,eAAK,MAAL,GAAc,MAAd;AACA,eAAK,OAAL,CAAa,SAAb,GAAyB,MAAzB;AACD,SALH,EAMG,KANH,CAMS,KAAK,IAAG;AACb,UAAA,OAAO,CAAC,GAAR,CAAY,KAAK,CAAC,OAAlB;AACD,SARH;;AAUA,aAAK,UAAL,CAAgB,OAAhB,GAA0B,MAAK;AAC7B,eAAK,SAAL,CAAe,KAAf,GAAuB,KAAK,OAAL,CAAa,UAApC;AACA,eAAK,SAAL,CAAe,MAAf,GAAwB,KAAK,OAAL,CAAa,WAArC;AACA,eAAK,SAAL,CAAe,UAAf,CAA0B,IAA1B,EAAgC,SAAhC,CAA0C,KAAK,OAA/C,EAAwD,CAAxD,EAA2D,CAA3D;AACA,eAAK,SAAL,CAAe,GAAf,GAAqB,KAAK,SAAL,CAAe,SAAf,CAAyB,YAAzB,CAArB;AACA,eAAK,SAAL,CAAe,SAAf,CAAyB,GAAzB,CAA6B,OAA7B;AACD,SAND;AAOD;;AAED,MAAA,OAAO,GAAA;AACL,aAAK,MAAL,CAAY,cAAZ,GAA6B,OAA7B,CAAqC,KAAK,IAAI,KAAK,CAAC,IAAN,EAA9C;AACA,aAAK,OAAL,CAAa,SAAb,GAAyB,IAAzB;AACD;;AA1DsB,KAAzB;AAAa,IAAA,YAAY,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CALxB,MAAA,CAAA,0CAAA,CAAA,WAAA,CAAA,CAAA,CAAU;AACT,MAAA,QAAQ,EAAE,SADD;AAET,MAAA,QAAA,EAAA,kCAAA,CAAA,iBAAA,CAAA,CAAA,mBAAA;AAAA;AAAA,sFAAA,CAAA,EAAA,OAFS;;;;AAAA,KAAV,CAKwB,E,yEAAA,CAAA,EAAZ,YAAY,CAAZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKb,QAAa,SAAS,GAAtB,MAAa,SAAb,CAAsB;AACpB,MAAA,WAAA,CAAoB,eAApB,EAAoD;AAAhC,aAAA,eAAA,GAAA,eAAA;AAClB,QAAA,OAAO,CAAC,GAAR,CAAY,wBAAZ;AACD;;AAHmB,KAAtB;;;YACuC,mDAAA,CAAA,iBAAA;;;AAD1B,IAAA,SAAS,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAJrB,MAAA,CAAA,0CAAA,CAAA,UAAA,CAAA,CAAA,CAAS;AACR,MAAA,YAAY,EAAE,CAAC,2CAAA,CAAA,cAAA,CAAD,CADN;AAER,MAAA,OAAO,EAAE,CAAC,4CAAA,CAAA,cAAA,CAAD,EAAe,gDAAA,CAAA,kBAAA,CAAf;AAFD,KAAT,CAIqB,E,uEACiB,mDAAA,CAAA,iBAAA,C,EADjB,CAAA,EAAT,SAAS,CAAT","sourcesContent":["export default \"<!-- Camera -->\\n<main id=\\\"cam\\\">\\n    <!-- Camera sensor -->\\n    <canvas id=\\\"cam--sensor\\\"></canvas>\\n    <!-- Camera view -->\\n    <video id=\\\"cam--view\\\" autoplay playsinline></video>\\n    <!-- Camera output -->\\n    <img src=\\\"//:0\\\" alt=\\\"\\\" id=\\\"cam--output\\\">\\n    <!-- Camera trigger -->\\n    <button id=\\\"cam--trigger\\\"></button>\\n</main>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CamComponent } from \"./cam.component\";\n\nconst routes: Routes = [\n    {\n        path: \"\",\n        component: CamComponent\n    }\n]\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule],\n    providers: []\n})\nexport class CamRoutingModule {\n    constructor() {\n        console.log(\"CamRoutingModule::constructor\");\n    }\n}\n","export default \"#cam, #cam--view, #cam--sensor, #cam--output{\\n  position: fixed;\\n  height: 100%;\\n  width: 100%;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n}\\n\\n#cam--view, #cam--sensor, #cam--output{\\n  -webkit-transform: scaleX(-1);\\n          transform: scaleX(-1);\\n  -webkit-filter: FlipH;\\n          filter: FlipH;\\n}\\n\\n#cam--trigger{\\n  position: fixed;\\n  bottom: 80px;\\n  left: calc(50% - 40px);\\n  width: 80px;\\n  height: 80px;\\n  border-radius: 90px;\\n  background:  #bff;\\n  border: 5px solid #4cf;\\n}\\n\\n.taken{\\n  height: 100px!important;\\n  width: 100px!important;\\n  -webkit-transition: all 0.5s ease-in;\\n  transition: all 0.5s ease-in;\\n  border: solid 3px white;\\n  box-shadow: 0 5px 10px 0 rgba(0,0,0,0.2);\\n  top: 20px;\\n  right: 20px;\\n  z-index: 2;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9jYW0vY2FtLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxlQUFlO0VBQ2YsWUFBWTtFQUNaLFdBQVc7RUFDWCxvQkFBaUI7S0FBakIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsNkJBQXFCO1VBQXJCLHFCQUFxQjtFQUNyQixxQkFBYTtVQUFiLGFBQWE7QUFDZjs7QUFFQTtFQUNFLGVBQWU7RUFDZixZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLFdBQVc7RUFDWCxZQUFZO0VBQ1osbUJBQW1CO0VBQ25CLGlCQUFpQjtFQUNqQixzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSx1QkFBdUI7RUFDdkIsc0JBQXNCO0VBQ3RCLG9DQUE0QjtFQUE1Qiw0QkFBNEI7RUFDNUIsdUJBQXVCO0VBQ3ZCLHdDQUF3QztFQUN4QyxTQUFTO0VBQ1QsV0FBVztFQUNYLFVBQVU7QUFDWiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvY2FtL2NhbS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2NhbSwgI2NhbS0tdmlldywgI2NhbS0tc2Vuc29yLCAjY2FtLS1vdXRwdXR7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgaGVpZ2h0OiAxMDAlO1xuICB3aWR0aDogMTAwJTtcbiAgb2JqZWN0LWZpdDogY292ZXI7XG59XG5cbiNjYW0tLXZpZXcsICNjYW0tLXNlbnNvciwgI2NhbS0tb3V0cHV0e1xuICB0cmFuc2Zvcm06IHNjYWxlWCgtMSk7XG4gIGZpbHRlcjogRmxpcEg7XG59XG5cbiNjYW0tLXRyaWdnZXJ7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgYm90dG9tOiA4MHB4O1xuICBsZWZ0OiBjYWxjKDUwJSAtIDQwcHgpO1xuICB3aWR0aDogODBweDtcbiAgaGVpZ2h0OiA4MHB4O1xuICBib3JkZXItcmFkaXVzOiA5MHB4O1xuICBiYWNrZ3JvdW5kOiAgI2JmZjtcbiAgYm9yZGVyOiA1cHggc29saWQgIzRjZjtcbn1cblxuLnRha2Vue1xuICBoZWlnaHQ6IDEwMHB4IWltcG9ydGFudDtcbiAgd2lkdGg6IDEwMHB4IWltcG9ydGFudDtcbiAgdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZS1pbjtcbiAgYm9yZGVyOiBzb2xpZCAzcHggd2hpdGU7XG4gIGJveC1zaGFkb3c6IDAgNXB4IDEwcHggMCByZ2JhKDAsMCwwLDAuMik7XG4gIHRvcDogMjBweDtcbiAgcmlnaHQ6IDIwcHg7XG4gIHotaW5kZXg6IDI7XG59XG4iXX0= */\"","import { Component, OnInit, OnDestroy } from \"@angular/core\";\n\n@Component({\n  selector: \"app-cam\",\n  templateUrl: \"./cam.component.html\",\n  styleUrls: [\"./cam.component.css\"]\n})\nexport class CamComponent implements OnInit, OnDestroy {\n  stream: MediaStream;\n  camView: HTMLVideoElement;\n  camOutput: HTMLImageElement;\n  camSensor: HTMLCanvasElement;\n  camTrigger: HTMLButtonElement;\n\n  constructor() {\n    console.log(\"CamComponent::constructor\");\n  }\n\n  ngOnInit() {\n    this.camView = document.querySelector(\"#cam--view\");\n    this.camOutput = document.querySelector(\"#cam--output\");\n    this.camSensor = document.querySelector(\"#cam--sensor\");\n    this.camTrigger = document.querySelector(\"#cam--trigger\");\n\n    this.camStart();\n  }\n\n  ngOnDestroy(): void {\n    this.camStop();\n  }\n\n  camStart() {\n    let deviceId: string;\n\n    navigator.mediaDevices.enumerateDevices().then((devices: MediaDeviceInfo[]) => {\n      devices = devices.filter(d => d.kind === \"videoinput\");\n      console.log(devices);\n      deviceId = devices[0].deviceId;\n    });\n\n    // const constraints = { video: {deviceId}, audio: true };\n    const hdConstraints = { video: { width: { min: 1280 }, height: { min: 720 } } };\n\n    navigator.mediaDevices\n      .getUserMedia(hdConstraints)\n      .then((stream: MediaStream) => {\n        this.stream = stream;\n        this.camView.srcObject = stream;\n      })\n      .catch(error => {\n        console.log(error.message);\n      });\n\n    this.camTrigger.onclick = () => {\n      this.camSensor.width = this.camView.videoWidth;\n      this.camSensor.height = this.camView.videoHeight;\n      this.camSensor.getContext(\"2d\").drawImage(this.camView, 0, 0);\n      this.camOutput.src = this.camSensor.toDataURL(\"image/webp\");\n      this.camOutput.classList.add(\"taken\");\n    };\n  }\n\n  camStop() {\n    this.stream.getVideoTracks().forEach(track => track.stop());\n    this.camView.srcObject = null;\n  }\n}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from '@angular/common';\n\nimport { MatIconRegistry } from \"@angular/material/icon\";\n\nimport { CamRoutingModule } from './cam-routing.module';\nimport { CamComponent } from \"./cam.component\";\n\n@NgModule({\n  declarations: [CamComponent],\n  imports: [CommonModule, CamRoutingModule]\n})\nexport class CamModule {\n  constructor(private matIconRegistry: MatIconRegistry) {\n    console.log(\"CamModule::constructor\");\n  }\n}\n"],"sourceRoot":"webpack:///","file":"modules-cam-cam-module-es5.js"}